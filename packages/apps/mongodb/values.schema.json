{
  "title": "Chart Values",
  "type": "object",
  "properties": {
    "architecture": {
      "description": "MongoDB deployment architecture.",
      "type": "string",
      "enum": ["standalone", "replicaset"],
      "default": "replicaset"
    },
    "replicaCount": {
      "description": "Number of MongoDB replicas (used when architecture=replicaset).",
      "type": "integer",
      "minimum": 1,
      "default": 3
    },
    "replicaSetName": {
      "description": "Custom replica set name. Leave empty to derive from the release name.",
      "type": "string",
      "default": ""
    },
    "arbiter": {
      "type": "object",
      "description": "Arbiter configuration.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Deploy an arbiter node for the replica set."
        }
      }
    },
    "auth": {
      "type": "object",
      "description": "Authentication and user management settings.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable SCRAM authentication."
        },
        "rootUser": {
          "type": "string",
          "default": "root",
          "description": "Admin user name."
        },
        "rootPassword": {
          "type": "string",
          "default": "",
          "description": "Admin password. Required when no existingSecret is provided."
        },
        "username": {
          "type": "string",
          "default": "",
          "description": "Optional application user name."
        },
        "password": {
          "type": "string",
          "default": "",
          "description": "Password for the optional application user."
        },
        "database": {
          "type": "string",
          "default": "",
          "description": "Database to grant to the optional application user."
        },
        "replicaSetKey": {
          "type": "string",
          "default": "",
          "description": "Keyfile value for internal replica set authentication. Required for production clusters."
        },
        "existingSecret": {
          "type": "string",
          "default": "",
          "description": "Name of a secret that already contains rootPassword (key: mongodb-root-password) and replicaSetKey (key: mongodb-replica-set-key)."
        }
      }
    },
    "persistence": {
      "type": "object",
      "description": "Persistent volume configuration.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable persistent volumes for MongoDB pods."
        },
        "size": {
          "type": "string",
          "default": "20Gi",
          "description": "Requested persistent volume size."
        },
        "storageClass": {
          "type": "string",
          "default": "",
          "description": "StorageClass to use. Leave empty to use the cluster default."
        },
        "accessModes": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["ReadWriteOnce"],
          "description": "PersistentVolumeClaim access modes."
        }
      }
    },
    "service": {
      "type": "object",
      "description": "Service exposure settings.",
      "properties": {
        "type": {
          "type": "string",
          "default": "ClusterIP",
          "description": "Kubernetes Service type for the primary endpoint."
        },
        "port": {
          "type": "integer",
          "default": 27017,
          "description": "MongoDB service port."
        }
      }
    },
    "resources": {
      "type": "object",
      "description": "Resource requests and limits applied to MongoDB pods.",
      "properties": {
        "requests": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "default": "250m" },
            "memory": { "type": "string", "default": "512Mi" }
          }
        },
        "limits": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "default": "1000m" },
            "memory": { "type": "string", "default": "2Gi" }
          }
        }
      }
    },
    "tls": {
      "type": "object",
      "description": "TLS settings for MongoDB traffic.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable TLS for MongoDB clients and internal traffic."
        },
        "autoGenerated": {
          "type": "boolean",
          "default": true,
          "description": "Automatically create self-signed certificates when no secret is provided."
        },
        "existingSecret": {
          "type": "string",
          "default": "",
          "description": "Secret containing TLS certificates to use instead of auto-generated ones."
        }
      }
    },
    "metrics": {
      "type": "object",
      "description": "Metrics and monitoring settings.",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Expose MongoDB metrics via a sidecar exporter."
        },
        "serviceMonitor": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false,
              "description": "Create a ServiceMonitor resource for Prometheus Operator."
            },
            "namespace": {
              "type": "string",
              "default": "",
              "description": "Namespace where the ServiceMonitor should be created."
            },
            "interval": {
              "type": "string",
              "default": "30s",
              "description": "Scrape interval for the ServiceMonitor."
            }
          }
        }
      }
    }
  }
}
